<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <div th:include="partials/head.html :: head"></div>
    <title>Results</title>
</head>
<body>
<section class="container-fluid w-75 text-center mt-2">
    <h2 class="text-light">USER</h2>
    <input type="hidden" id="score" th:value="${score}">
    <h3 class="text-light fs-1">SCORE: <span id="scoreCounter"></span></h3>
    <div class="mb-3">
        <a th:href="@{/trivia-game}"><button type="button" class="mr-2 btn btn-warning">Another Round!</button></a>
        <a th:href="@{/index}"><button type="button" class="ml-2 btn btn-warning">Start A New Game</button></a>
    </div>
    <div class="row d-flex">
        <div class="col-12 col-sm-6">
            <h4 class="text-light fs-1 bg-success">CORRECT ANSWERS</h4>
            <ul class="list-group list-group-flush">
                <li class="list-group-item" th:each="correctQ, int : ${correctQs}">
                    <p class="questionsResults" th:text="${correctQ.question}"></p>
                    <p class="bg-success text-light">CORRECT ANSWER: <span
                            th:text="${correctAnswers.get(int.index)}"></span></p>
                </li>
            </ul>
        </div>
        <div class="col-12 col-sm-6">
            <h4 class="text-light fs-1 bg-danger">INCORRECT ANSWERS</h4>
            <ul class="list-group list-group-flush">
                <li class="list-group-item" th:each="incorrectQ, int : ${incorrectQs}">
                    <p class="questionsResults" th:text="${incorrectQ.question}"></p>
                    <p class="bg-danger text-light">SUBMITTED ANSWER: <span
                            th:text="${submittedAnswers.get(int.index)}"></span></p>
                    <p class="bg-success text-light">CORRECT ANSWER: <span
                            th:text="${incorrectAnswers.get(int.index)}"></span></p>
                </li>
            </ul>
        </div>
    </div>
</section>

<div th:include="partials/footerNav.html :: footerNav"></div>
<div th:include="partials/scripts.html :: scripts"></div>
<script type="text/javascript">
    let scoreToCount = parseInt($('#score').val())
    console.log(scoreToCount)
    let zero = 0

    function scoreCounter() {
        var scoreCount = setInterval(function () {
            if (zero === scoreToCount) {
                console.log("done")
                $('#scoreCounter').html(zero)
                clearInterval(scoreCount)
                $('#congrats').show()
            } else {
                console.log(zero)
                zero = zero + 5
                $('#scoreCounter').html(zero)
            }
        }, 10)
    }

    scoreCounter()
</script>
</body>
</html>